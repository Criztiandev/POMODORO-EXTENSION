<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Settings</title>
    <link rel="stylesheet" href="<%= globalStyleUri %>">
    <link rel="stylesheet" href="<%= styleUri %>">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ô Pomodoro Settings</h1>
            <button class="back-btn" onclick="showDashboard()">ê Dashboard</button>
        </div>
        
        <% if (isTimerActive) { %>
        <div class="warning">
            † Settings cannot be changed while timer is running. Stop the timer to modify settings.
        </div>
        <% } %>
        
        <form id="settingsForm">
            <div class="setting-group">
                <label class="setting-label" for="workDuration">Pomodoro Duration (minutes)</label>
                <input type="number" id="workDuration" class="setting-input" value="<%= settings.workDuration %>" min="1" max="60" <%= isTimerActive ? 'disabled' : '' %>>
            </div>
            
            <div class="setting-group">
                <label class="setting-label" for="shortBreakDuration">Short Break Duration (minutes)</label>
                <input type="number" id="shortBreakDuration" class="setting-input" value="<%= settings.shortBreakDuration %>" min="1" max="30" <%= isTimerActive ? 'disabled' : '' %>>
            </div>
            
            <div class="setting-group">
                <label class="setting-label" for="longBreakDuration">Long Break Duration (minutes)</label>
                <input type="number" id="longBreakDuration" class="setting-input" value="<%= settings.longBreakDuration %>" min="1" max="60" <%= isTimerActive ? 'disabled' : '' %>>
            </div>
            
            <div class="setting-group">
                <label class="setting-label">Hour Format</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="hourFormat" class="checkbox" <%= settings.hourFormat ? 'checked' : '' %> <%= isTimerActive ? 'disabled' : '' %>>
                    <label for="hourFormat">Use 24-hour format</label>
                </div>
                <div class="description">Currently using MM:SS format for timer display</div>
            </div>
            
            <div class="setting-group">
                <label class="setting-label">Notifications</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="notificationEnabled" class="checkbox" <%= settings.notificationEnabled ? 'checked' : '' %> <%= isTimerActive ? 'disabled' : '' %>>
                    <label for="notificationEnabled">Enable notifications when sessions complete</label>
                </div>
                <div class="description">Shows system notifications when work sessions and breaks end</div>
            </div>
            
            <button type="submit" class="save-btn" <%= isTimerActive ? 'disabled' : '' %>>
                <%= isTimerActive ? 'Timer Running - Stop to Save' : 'Save Settings' %>
            </button>
        </form>
    </div>
    
    <script src="<%= scriptUri %>"></script>
</body>
</html>